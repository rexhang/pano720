<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <!-- for optimal display on high DPI devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>全景照片预览 | 加载中...</title>

  <!-- 前置脚本，需要在主脚本加载之前执行 -->
  <script>
    // url 包含 debug=true 或者 本地存储 包含debug = 'true' 时，debug 脚本会被加载
    window.debugMode = {
      id: 'debug-tools',
      status: /debug-tool=true/.test(window.location) || localStorage.getItem('debug-tool') === 'true',
      loaded: undefined
    };
    if (window.debugMode.status) {
      // eg: `${url}?|&${'debug=true'}` || localStorage.setItem('debug', 'true')
      const erudaCDNScript = document.createElement('script');
      erudaCDNScript.id = window.debugMode.id;
      erudaCDNScript.src = '//cdn.jsdelivr.net/npm/eruda';
      document.head.appendChild(erudaCDNScript);
      erudaCDNScript.onload = () => {
        eruda.init();
        window.debugMode.loaded = true;
        console.info(`★★★★★ eruda debug插件 已被初始化...`);
        // 待加载的插件列表 更多可参阅 https://github.com/liriliri/eruda
        const erudaPlugins = [
          // 加载插件 - code<可编程>
          { name: 'erudaCode',  src: '//cdn.jsdelivr.net/npm/eruda-code' },
          // 加载插件 - monitor<性能表现>
          { name: 'erudaMonitor',  src: '//cdn.jsdelivr.net/npm/eruda-monitor' },
        ];
        // 添加插件，需要等待插件加载完毕才可add
        erudaPlugins.forEach(pluginConf => {
          const erudaPluginCDNScript = document.createElement('script');
          erudaPluginCDNScript.src = pluginConf.src;
          document.head.appendChild(erudaPluginCDNScript);
          erudaPluginCDNScript.onload = () => {
            // 加载完毕添加
            eruda.add(window[pluginConf.name]);
            console.info(`★★★★★ eruda: ${pluginConf.name} 功能插件 已被添加...`);
          }
        });
      }
      erudaCDNScript.onerror = () => {
        window.debugMode.loaded = false;
      }
    }
  </script>
</head>

<div id="viewer" style="width: 100vw; height: 100vh;"></div>

<body>

</body>

</html>
